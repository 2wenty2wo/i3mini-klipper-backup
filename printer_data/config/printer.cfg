# ─────────────────────────────────────────────────────────────────────────────
# Wanhao Duplicator i3 Mini (AVR ATmega2560) — Klipper configuration (modular)
# Root file orchestrates includes and keeps Klipper's SAVE_CONFIG block.
# Do NOT hand-edit the auto block Klipper appends at the end.
# ─────────────────────────────────────────────────────────────────────────────

# UI/host presets
[include mainsail.cfg]

# KAMP toggles/settings live in here (keep this file where you have it)
[include KAMP_Settings.cfg]

# Core hardware & motion (MCUs, steppers, kinematics, limits)
[include ./config/hardware_motion.cfg]

# Tools & sensors (extruder, fans, display, retraction, ADXL, resonance)
[include ./config/tools_sensors.cfg]

# Probing & mesh (BLTouch, safe_z_home, bed_mesh, screws_tilt_adjust)
[include ./config/probing_mesh.cfg]

[include ./config/safety.cfg]

# Print lifecycle, parking, cancel, KAMP on/off macros
[include ./macros/print_lifecycle.cfg]

# Tuning helpers (ADXL sanity, shaper calibrate)
[include ./macros/tuning_helpers.cfg]

# Klipper Backup Config to Github
[include ./macros/klipper_backup.cfg]

# Object exclusion (used by KAMP’s adaptive features)
[exclude_object]

# ─────────────────────────────────────────────────────────────────────────────
# Klipper will append/maintain the auto-generated block below on SAVE_CONFIG.
# ─────────────────────────────────────────────────────────────────────────────

[include shell_command.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bltouch]
#*# z_offset = 1.350
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.160000, 0.030000, 0.070000, 0.035000, -0.095000
#*# 	  -0.095000, 0.062500, 0.070000, 0.007500, -0.125000
#*# 	  -0.090000, 0.080000, 0.090000, 0.020000, -0.107500
#*# 	  -0.047500, 0.062500, 0.090000, 0.015000, -0.097500
#*# 	  -0.035000, 0.105000, 0.127500, 0.070000, -0.050000
#*# x_count = 5
#*# y_count = 5
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = lagrange
#*# tension = 0.2
#*# min_x = 5.0
#*# max_x = 115.0
#*# min_y = 34.5
#*# max_y = 177.5
#*#
#*# [input_shaper]
#*# shaper_type_x = 2hump_ei
#*# shaper_freq_x = 80.4
#*# shaper_type_y = zv
#*# shaper_freq_y = 107.4
